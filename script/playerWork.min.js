const playlist=document.querySelectorAll(".js-audio"),namePlaceHolder=document.querySelector(".musicName"),musicWindow=document.querySelector(".futureTracks"),ambianceWindow=document.querySelector(".futureAmbiances"),audio=document.querySelectorAll("audio"),playButton=document.querySelector("#playMeButton"),pastOne=document.querySelector("#pastOne"),nextOne=document.querySelector("#nextOne");let trackIndex;const artworkPlaceHolder=document.querySelector("#artworkPlaceHolder"),loadedContent=document.querySelector(".loadedContent"),loadingScreen=document.querySelector(".loadingScreen"),videoLoaded=document.querySelector(".videoLoaded");videoLoaded.addEventListener("loadeddata",()=>{loadedContent.classList.add("allLoaded"),loadingScreen.style.display="none",console.log("loaded")});class Song{constructor(e){this.music=e,this.songName=this.music.getAttribute("name"),this.artwork=this.music.getAttribute("artwork"),this.duration=this.music.duration,this.songTime=this.music.currentTime,this.volume=this.music.volume,this.infoSpread(),this.initiate()}initiate(){let e=document.createElement("div");e.classList.add("trackId"),musicWindow.appendChild(e);let t=document.createElement("div");t.classList.add("playNext"),e.appendChild(t);let i=document.createElement("span");i.classList.add("flaticon-play-button"),t.appendChild(i);let a=document.createElement("div");a.classList.add("titleOfTrack"),a.innerText=this.songName,e.appendChild(a)}infoSpread(){this.music.addEventListener("play",()=>{namePlaceHolder.innerText=this.songName,artworkPlaceHolder.setAttribute("src",this.artwork)})}}class Ambiance{constructor(e){this.ambiance=e,this.songName=this.ambiance.getAttribute("name"),this.artwork=this.ambiance.getAttribute("artwork"),this.duration=this.ambiance.duration,this.songTime=this.ambiance.currentTime,this.volume=this.ambiance.volume,this.infoSpread(),this.initiate()}initiate(){let e=document.createElement("div");e.classList.add("ambianceNoise"),ambianceWindow.appendChild(e);let t=document.createElement("div");t.classList.add("playNext"),e.appendChild(t);let i=document.createElement("span");i.classList.add("flaticon-play-button"),t.appendChild(i);let a=document.createElement("div");a.classList.add("titleOfTrack"),a.innerText=this.songName,e.appendChild(a)}infoSpread(){this.ambiance.addEventListener("play",()=>{namePlaceHolder.innerText=this.songName,artworkPlaceHolder.setAttribute("src",this.artwork)})}}const song1=new Song(document.querySelector(".js-audio0")),song2=new Song(document.querySelector(".js-audio1")),song3=new Song(document.querySelector(".js-audio2")),song4=new Song(document.querySelector(".js-audio3")),song5=new Song(document.querySelector(".js-audio4")),song6=new Song(document.querySelector(".js-audio5")),song7=new Song(document.querySelector(".js-audio6")),song8=new Song(document.querySelector(".js-audio7")),song9=new Song(document.querySelector(".js-audio8")),ambiance1=new Ambiance(document.querySelector(".rain")),ambiance2=new Ambiance(document.querySelector(".flight")),ambiance3=new Ambiance(document.querySelector(".carRain"));let trackId=document.querySelectorAll(".trackId");for(let e=0;e<trackId.length;e++)trackId[e].addEventListener("click",()=>{trackId.forEach(t=>{t.classList.remove("hideStyleMusic");let i=trackId[e].querySelector(".titleOfTrack").innerHTML;for(k=0;k<audio.length;k++)i==audio[k].getAttribute("name")?(audio[k].play(),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause")):audio[k].pause()}),trackId[e].classList.add("hideStyleMusic")});let ambianceNoise=document.querySelectorAll(".ambianceNoise");for(let e=0;e<ambianceNoise.length;e++)ambianceNoise[e].addEventListener("click",()=>{ambianceNoise.forEach(t=>{t.classList.remove("hideStyleMusic");let i=ambianceNoise[e].querySelector(".titleOfTrack").innerHTML;for(k=0;k<audio.length;k++)i==audio[k].getAttribute("name")?(audio[k].play(),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause")):audio[k].pause()}),ambianceNoise[e].classList.add("hideStyleMusic")});playButton.addEventListener("mousedown",()=>{for(k=0;k<audio.length;k++){if(document.querySelector(".musicName").innerHTML==audio[k].getAttribute("name")&&1==audio[k].paused){audio[k].play(),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause");break}if(document.querySelector(".musicName").innerHTML==audio[k].getAttribute("name")&&0==audio[k].paused){audio[k].pause(),playButton.classList.add("flaticon-play-button"),playButton.classList.remove("flaticon-pause");break}}}),playButton.addEventListener("mousedown",()=>{"--:--"==document.querySelector(".musicName").innerHTML&&(audio[0].play(),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause"),trackId[0].classList.add("hideStyleMusic"))});const playlistMusic=document.querySelectorAll(".playlistMusic");for(i=0;i<playlistMusic.length-1;i++)playlistMusic[i].addEventListener("ended",()=>{let e=parseInt(Math.random()*playlistMusic.length);playlistMusic[i]!=playlistMusic[e]&&e<9?(playlistMusic[e].play(),trackId.forEach(e=>{e.classList.remove("hideStyleMusic")}),trackId[e].classList.add("hideStyleMusic"),trackId[i].classList.remove("hideStyleMusic")):i==e&&e>trackId.length-1?(playlistMusic[e-1].play(),trackId.forEach(e=>{e.classList.remove("hideStyleMusic")}),trackId[e-1].classList.add("hideStyleMusic")):i==e&&e<trackId.length+1&&(playlistMusic[e+1].play(),trackId.forEach(e=>{e.classList.remove("hideStyleMusic")}),trackId[e+1].classList.add("hideStyleMusic"))});class Player{constructor(e){this.musicPlayer=e,this.timer=this.musicPlayer.querySelector(".timer"),this.timerFill=this.musicPlayer.querySelector(".timeFill"),this.musicName=this.musicPlayer.querySelector(".musicName").innerText,this.tracks=document.querySelectorAll(".playlistMusic"),this.currentTrackName="none",this.currentTrackFile,this.currentTrack(),this.seekBar(),this.past(),this.next(),this.volumeSettings(),this.slomo(),this.speedUp(),this.normal(),this.spaceBar()}currentTrack(){for(let e=0;e<audio.length;e++)audio[e].addEventListener("play",()=>{for(let e of audio)if(this.musicName=this.musicPlayer.querySelector(".musicName").innerText,e.getAttribute("name")==this.musicName)return this.currentTrackName=e.getAttribute("name"),this.currentTrackFile=e,this.currentTrackFile})}volumeSettings(){const e=document.querySelector(".volumeBar"),t=document.querySelector(".volumeFillBar");e.addEventListener("click",i=>{const a=e.getBoundingClientRect(),s=(i.clientX-a.left)/a.width,n=s;t.style.transform="translateX("+200*n+"px)";for(let e of audio)e.volume=n})}slomo(){const e=document.querySelector(".slomo");e.addEventListener("mousedown",()=>{for(let e of audio)e.playbackRate=.65})}speedUp(){const e=document.querySelector(".speedUp");e.addEventListener("mousedown",()=>{for(let e of audio)e.playbackRate=1.35})}normal(){const e=document.querySelector(".normal");e.addEventListener("mousedown",()=>{for(let e of audio)e.playbackRate=1})}seekBar(){for(let e=0;e<audio.length;e++)audio[e].addEventListener("play",()=>{"none"!=this.currentTrackName&&(this.currentTrackFile.addEventListener("timeupdate",()=>{this.currentTrackDuration=this.currentTrackFile.duration,this.currentTrackCurrentTime=this.currentTrackFile.currentTime,this.ratio=this.currentTrackCurrentTime/this.currentTrackDuration,this.timerFill.style.transform="translateX("+170*this.ratio+"px)"}),this.timer.addEventListener("click",e=>{const t=this.timer.getBoundingClientRect(),i=(e.clientX-t.left)/t.width,a=i*this.currentTrackDuration;this.currentTrackFile.currentTime=a}))})}next(){let e;nextOne.addEventListener("click",()=>{for(i=0;i<this.tracks.length;i++)if(this.currentTrackFile==this.tracks[i]){e=i;break}e>this.tracks.length-2?(this.currentTrackFile.pause(),trackId[i].classList.remove("hideStyleMusic"),this.tracks[0].play(),trackId[0].classList.add("hideStyleMusic"),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause")):(this.currentTrackFile.pause(),trackId[i].classList.remove("hideStyleMusic"),this.tracks[e+1].play(),trackId[i+1].classList.add("hideStyleMusic"),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause"))})}past(){pastOne.addEventListener("click",()=>{for(i=0;i<this.tracks.length;i++)if(this.currentTrackFile==this.tracks[i]){trackIndex=i;break}trackIndex<1?(this.currentTrackFile.pause(),trackId[i].classList.remove("hideStyleMusic"),this.tracks[this.tracks.length-1].play(),trackId[this.tracks.length-1].classList.add("hideStyleMusic"),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause")):(this.currentTrackFile.pause(),trackId[i].classList.remove("hideStyleMusic"),this.tracks[trackIndex-1].play(),trackId[i-1].classList.add("hideStyleMusic"),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause"))})}spaceBar(){document.body.onkeyup=(e=>{32==e.keyCode&&(this.currentTrackFile.paused?(this.currentTrackFile.play(),playButton.classList.remove("flaticon-play-button"),playButton.classList.add("flaticon-pause")):0==this.currentTrackFile.paused&&(this.currentTrackFile.pause(),playButton.classList.add("flaticon-play-button"),playButton.classList.remove("flaticon-pause")))})}}window.onkeydown=function(e){return!(32==e.keyCode)};const player1=new Player(document.querySelector(".lofiMusicPlayer")),infoCross=document.querySelector("#infoAway"),info=document.querySelector(".blackBg"),infoButton=document.querySelector("#infoButton"),settingsCross=document.querySelector("#settingsAway"),settings=document.querySelector(".greyBg"),settingsButton=document.querySelector("#settingsButton");let settingsIsOpen=!1,infoIsOpen=!1;document.addEventListener("click",e=>{if(1==settingsIsOpen){const t=document.querySelector(".settings");let i=e.target;do{if(i==t)return;i=i.parentNode}while(i);settingsIsOpen=!1,settings.style.display="none"}}),document.addEventListener("click",e=>{if(1==infoIsOpen){const t=document.querySelector(".info");let i=e.target;do{if(i==t)return;i=i.parentNode}while(i);infoIsOpen=!1,info.style.display="none"}}),infoCross.addEventListener("mousedown",()=>{info.style.display="none",infoIsOpen=!1}),infoButton.addEventListener("mousedown",()=>{info.style.display="flex",setTimeout(()=>{infoIsOpen=!0},300)}),settingsCross.addEventListener("mousedown",()=>{settings.style.display="none",settingsIsOpen=!1}),settingsButton.addEventListener("mousedown",()=>{settings.style.display="flex",setTimeout(()=>{settingsIsOpen=!0},300)});const ambianceRoomButton=document.querySelector(".ambianceRoomButton"),musicRoomButton=document.querySelector(".musicRoomButton"),futureTracks=document.querySelector(".futureTracks"),futureAmbiances=document.querySelector(".futureAmbiances"),rainBackground=document.querySelector(".rainBackground"),neonBackground=document.querySelector(".neonBackground"),videoContainer=document.querySelector(".videoContainer"),heart=document.querySelector("#heartIcon");ambianceRoomButton.addEventListener("mousedown",()=>{ambianceRoomButton.classList.remove("bypassedCategory"),musicRoomButton.classList.add("bypassedCategory"),futureTracks.style.display="none",futureAmbiances.style.display="block",videoContainer.classList.add("switchVideo"),nextOne.style.opacity=0,pastOne.style.opacity=0;for(let e of audio)e.pause(),e.currentTime=0;for(let e of trackId)e.classList.remove("hideStyleMusic")}),musicRoomButton.addEventListener("mousedown",()=>{ambianceRoomButton.classList.add("bypassedCategory"),musicRoomButton.classList.remove("bypassedCategory"),futureTracks.style.display="block",futureAmbiances.style.display="none",videoContainer.classList.remove("switchVideo"),nextOne.style.opacity=1,pastOne.style.opacity=1,document.querySelector(".radioButtons").style.transform=" translateX(0px)";for(let e of audio)e.pause(),e.currentTime=0;for(let e of ambianceNoise)e.classList.remove("hideStyleMusic")});